<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link href="/static/imageview.css" rel="stylesheet" />
  </head>
  <body>
    {{ if .Image.IsVideo }}
      <video autoplay loop>
        <source src="/raw{{ .Url }}" type="{{ .Image.Mimetype }}" />
      </video>
    {{ else }}
      <img src="/raw{{ .Url }}" />
    {{ end }}


    <div id="previous_button">
      <a id="previous" href="{{ .Previous }}?{{ .QueryString }}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          enable-background="new 0 0 32 32"
          version="1.1"
          viewBox="0 0 32 32"
          xml:space="preserve"
        >
          <g id="Double_Chevron">
            <path
              d="M10.725,6.287c-0.395-0.394-1.036-0.394-1.431,0l-9.002,8.999c-0.39,0.389-0.39,1.039,0,1.429l9.002,8.999   c0.395,0.394,1.035,0.394,1.431,0c0.395-0.394,0.395-1.034,0-1.428L2.437,16l8.287-8.285C11.12,7.321,11.12,6.681,10.725,6.287z"
            />
          </g>
        </svg>
      </a>
    </div>

    <div id="next_button">
      <a id="next" href="{{ .Next }}?{{ .QueryString }}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          enable-background="new 0 0 32 32"
          version="1.1"
          viewBox="0 0 32 32"
          xml:space="preserve"
        >
          <g id="Double_Chevron">
            <path
              d="M31.708,15.286l-9.002-8.999c-0.395-0.394-1.035-0.394-1.431,0c-0.395,0.394-0.395,1.034,0,1.428L29.563,16   l-8.287,8.285c-0.395,0.394-0.395,1.034,0,1.429c0.395,0.394,1.036,0.394,1.431,0l9.002-8.999   C32.097,16.325,32.097,15.675,31.708,15.286z"
            />
          </g>
        </svg>
      </a>
      <a class="adds" href="/api/random">
        <svg
          class="random_on_{{ .RandomState }}"
          version="1.1"
          id="randomIcon"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 512 512"
          enable-background="new 0 0 512 512"
          xml:space="preserve"
        >
          <g id="_x23_231f20ff">
            <path
              d="M409.434,82.96c30.04,25.7,60.08,51.42,89.971,77.29c-29.49,26.511-60.15,51.851-90.101,77.9		c0.07-17.43-0.11-34.851,0.061-52.271c-19,0.03-38-0.109-56.99,0.061c-9.13,0.02-17.72,4.58-23.87,11.16		c-54.55,56.779-109.21,113.46-163.74,170.26c-6.06,6.29-14.51,10.4-23.34,10.32c-34.689,0.22-69.39-0.17-104.069,0.229		c-12.891-0.38-23.95-12.06-23.94-24.89c-0.64-13.91,11.62-25.9,25.28-26.311c27.55-0.26,55.13,0.15,82.68-0.189		c10.05-0.061,18.9-5.92,25.24-13.32c53.72-55.939,107.5-111.83,161.25-167.75c6.04-6.59,14.72-10.65,23.68-10.85		c25.939-0.11,51.89,0.1,77.82-0.101C409.313,117.32,409.174,100.141,409.434,82.96z"
            />
            <path
              d="M32.764,134.48c37.5-0.311,75.131,0.03,112.69-0.08c9.68-0.43,19.54,3.2,26.12,10.43		c15.609,16.061,31.05,32.311,46.57,48.46c6.359,6.5,9.85,15.96,7.64,24.98c-2.41,11.04-12.98,19.819-24.36,19.71		c-7.729,0.35-14.85-3.59-20.54-8.48c-10.64-11.34-20.84-23.12-31.649-34.31c-6.19-6.3-15.09-9.41-23.83-9.29		c-27.99-0.12-55.98,0.08-83.971-0.09c-11.14-0.34-23.02-5.601-27.13-16.66C7.974,155.07,17.654,137.19,32.764,134.48z"
            />
            <path
              d="M261.554,278.17c9.67-7.729,24.83-6.609,33.36,2.32c11.689,11.98,23.13,24.21,34.83,36.18		c6.08,6.41,14.84,10.07,23.67,9.98c18.66-0.07,37.319,0.08,55.99-0.09c-0.19-17.11-0.07-34.221-0.04-51.33		c30.27,25.64,60.31,51.55,90.3,77.52c-29.95,25.95-60.061,51.71-90.221,77.41c-0.38-17.5,0.04-35.01-0.189-52.51		c-25.97-0.24-51.94-0.021-77.91-0.11c-8.95-0.08-17.57-4.35-23.56-10.91c-16.73-17.27-33.73-34.27-50.29-51.689		C247.904,304.471,250.034,286.36,261.554,278.17z"
            />
          </g>
        </svg>
      </a>
      <a class="adds" href="/">
        <svg
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 460.298 460.297"
          enable-background="new 0 0 460.298 460.297"
          xml:space="preserve"
        >
          <g>
            <g>
              <path
                d="M230.149,120.939L65.986,256.274c0,0.191-0.048,0.472-0.144,0.855c-0.094,0.38-0.144,0.656-0.144,0.852v137.041			c0,4.948,1.809,9.236,5.426,12.847c3.616,3.613,7.898,5.431,12.847,5.431h109.63V303.664h73.097v109.64h109.629			c4.948,0,9.236-1.814,12.847-5.435c3.617-3.607,5.432-7.898,5.432-12.847V257.981c0-0.76-0.104-1.334-0.288-1.707L230.149,120.939			z"
              />
              <path
                d="M457.122,225.438L394.6,173.476V56.989c0-2.663-0.856-4.853-2.574-6.567c-1.704-1.712-3.894-2.568-6.563-2.568h-54.816			c-2.666,0-4.855,0.856-6.57,2.568c-1.711,1.714-2.566,3.905-2.566,6.567v55.673l-69.662-58.245			c-6.084-4.949-13.318-7.423-21.694-7.423c-8.375,0-15.608,2.474-21.698,7.423L3.172,225.438c-1.903,1.52-2.946,3.566-3.14,6.136			c-0.193,2.568,0.472,4.811,1.997,6.713l17.701,21.128c1.525,1.712,3.521,2.759,5.996,3.142c2.285,0.192,4.57-0.476,6.855-1.998			L230.149,95.817l197.57,164.741c1.526,1.328,3.521,1.991,5.996,1.991h0.858c2.471-0.376,4.463-1.43,5.996-3.138l17.703-21.125			c1.522-1.906,2.189-4.145,1.991-6.716C460.068,229.007,459.021,226.961,457.122,225.438z"
              />
            </g>
          </g>
        </svg>
      </a>
      <a class="adds" href="/tags{{ .Path }}">
        <svg
          enable-background="new 0 0 32 32"
          version="1.1"
          viewBox="0 0 32 32"
          xml:space="preserve"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <g id="tag">
            <path
              clip-rule="evenodd"
              d="M31.391,13.883l-5-8c-0.73-1.169-2.012-1.88-3.391-1.88H4   c-2.209,0-4,1.791-4,4v16c0,2.209,1.791,4,4,4h19c1.379,0,2.66-0.711,3.391-1.881l5-8C32.203,16.827,32.203,15.18,31.391,13.883z    M29.695,17.062l-5,8.002c-0.367,0.588-1.002,0.939-1.695,0.939H4c-1.103,0-2-0.898-2-2v-16c0-1.103,0.897-2,2-2h19   c0.693,0,1.328,0.352,1.695,0.939l5,8C30.098,15.587,30.098,16.419,29.695,17.062z"
              fill-rule="evenodd"
            />
            <path
              clip-rule="evenodd"
              d="M23,13.003c-1.658,0-3,1.343-3,3c0,1.657,1.342,3,3,3   c1.656,0,3-1.344,3-3C26,14.346,24.656,13.003,23,13.003z M23,18.004c-1.105,0-2-0.896-2-2c0-1.104,0.895-2,2-2   c1.104,0,2,0.896,2,2C25,17.107,24.104,18.004,23,18.004z"
              fill-rule="evenodd"
            />
          </g>
        </svg>
      </a>
    </div>

    <div id="mood_box">
      <a class="mood_button" href="/api/browsingmood">
        <svg
          version="1.1"
          id="Capa_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 490 490"
          enable-background="new 0 0 490 490"
          xml:space="preserve"
        >
          <polygon
            points="11.387,490 245,255.832 478.613,490 489.439,479.174 255.809,244.996 489.439,10.811 478.613,0 245,234.161 
						11.387,0 0.561,10.811 234.191,244.996 0.561,479.174 "
          />
        </svg>
      </a>
      <a id="cold" class="mood_button" href="/api/browsingmood?mood=cold">
        <svg
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 64 64"
          enable-background="new 0 0 64 64"
          xml:space="preserve"
        >
          <g id="Eye">
            <path
              d="M3.6387,26.5303001c0.1738,0,0.3506-0.0449009,0.5107002-0.1406994
							c28.3124981-16.8554001,55.5741997-0.1816006,55.8466988-0.0117016c0.4687004,0.2910004,1.0849991,0.152401,1.377903-0.3163986
							c0.2939987-0.467701,0.1523972-1.0848999-0.315403-1.3779011c-0.0699997-0.044199-1.8740005-1.1501999-4.9939995-2.5170002
							l3.5007973-4.9477997c0.3194008-0.4501991,0.2119026-1.0742989-0.2391968-1.3935995
							c-0.4491997-0.3192997-1.0741997-0.2109003-1.3936005,0.2393007l-3.5555992,5.0252991
							c-0.0694008,0.0977993-0.1098022,0.2059002-0.139801,0.3152008c-2.2316017-0.8938999-4.9424019-1.8278999-8.039299-2.6191006
							l1.6604996-6.5397997c0.1357002-0.5352001-0.1884995-1.0791006-0.7236023-1.2158003
							c-0.5361977-0.1328001-1.0800972,0.1875-1.2159004,0.7235994l-1.6675987,6.5681009
							c-3.3941002-0.7549-7.1808014-1.2987003-11.251297-1.4236012V9.5c0-0.5527-0.4473-1-1-1s-1,0.4473-1,1v7.3726997
							c-3.5991001,0.0163002-7.3899994,0.3733006-11.3087997,1.2228012l-1.6100998-6.3416014
							c-0.1368008-0.5360994-0.6807003-0.8554993-1.2159004-0.7235994c-0.5351009,0.1366997-0.8593006,0.6806002-0.7236004,1.2158003
							l1.6044006,6.3189993c-2.6304998,0.6741009-5.3081007,1.5778008-8.0148001,2.7460995l-3.4832001-5.2242985
							C5.9414001,15.6269999,5.3223,15.5029001,4.8613,15.8095999c-0.4598999,0.3065996-0.5840001,0.927701-0.2772999,1.3867006
							l3.2999001,4.9494991c-1.5803003,0.7511997-3.1668,1.5778999-4.7579002,2.5251007
							C2.6514001,24.9531002,2.4960999,25.5674,2.7783,26.0419998C2.9658,26.3563995,3.2979,26.5303001,3.6387,26.5303001z"
            />
            <path
              d="M32,23.5c-17.6730995,0-32,7.1634998-32,16s14.3268995,16,32,16s32-7.1635017,32-16S49.6730957,23.5,32,23.5z M2,39.5
							c0-5.5908012,8.2476997-11.5039997,21.2479-13.3850994C18.8862,28.9727993,16,33.8960991,16,39.5
							s2.8862,10.5271988,7.2479,13.3851013C10.2476997,51.0040016,2,45.0908012,2,39.5z M32,25.5c7.7195969,0,14,6.2803001,14,14
							c0,7.7196007-6.2804031,14-14,14s-14-6.2803993-14-14C18,31.7803001,24.2803993,25.5,32,25.5z M40.7520981,52.8851013
							C45.1137962,50.0271988,48,45.1039009,48,39.5s-2.8862038-10.5272007-7.2479019-13.3850994
							C53.7522964,27.9960003,62,33.9091988,62,39.5S53.7522964,51.0040016,40.7520981,52.8851013z"
            />
            <path
              d="M32,47.5844994c4.4650002,0,8.0844955-3.6194992,8.0844955-8.0844994S36.4650002,31.4153996,32,31.4153996
							S23.9155006,35.0349998,23.9155006,39.5S27.5349998,47.5844994,32,47.5844994z M32,33.4154015
							c3.3549995,0,6.0844955,2.729599,6.0844955,6.0845985S35.3549995,45.5844994,32,45.5844994S25.9155006,42.8549995,25.9155006,39.5
							S28.6450005,33.4154015,32,33.4154015z"
            />
          </g>
        </svg>
      </a>
      <a id="warm" class="mood_button" href="/api/browsingmood?mood=warm">
        <svg
          version="1.1"
          id="Capa_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 490.4 490.4"
          enable-background="new 0 0 490.4 490.4"
          xml:space="preserve"
        >
          <g>
            <g>
              <path
                d="M222.5,453.7c6.1,6.1,14.3,9.5,22.9,9.5c8.5,0,16.9-3.5,22.9-9.5L448,274c27.3-27.3,42.3-63.6,42.4-102.1
								c0-38.6-15-74.9-42.3-102.2S384.6,27.4,346,27.4c-37.9,0-73.6,14.5-100.7,40.9c-27.2-26.5-63-41.1-101-41.1
								c-38.5,0-74.7,15-102,42.2C15,96.7,0,133,0,171.6c0,38.5,15.1,74.8,42.4,102.1L222.5,453.7z M59.7,86.8
								c22.6-22.6,52.7-35.1,84.7-35.1s62.2,12.5,84.9,35.2l7.4,7.4c2.3,2.3,5.4,3.6,8.7,3.6l0,0c3.2,0,6.4-1.3,8.7-3.6l7.2-7.2
								c22.7-22.7,52.8-35.2,84.9-35.2c32,0,62.1,12.5,84.7,35.1c22.7,22.7,35.1,52.8,35.1,84.8s-12.5,62.1-35.2,84.8L251,436.4
								c-2.9,2.9-8.2,2.9-11.2,0l-180-180c-22.7-22.7-35.2-52.8-35.2-84.8C24.6,139.6,37.1,109.5,59.7,86.8z"
              />
            </g>
          </g>
        </svg>
      </a>
      <a id="hot" class="mood_button" href="/api/browsingmood?mood=hot">
        <svg
          version="1.1"
          id="Capa_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 55.071 55.071"
          enable-background="new 0 0 55.071 55.071"
          xml:space="preserve"
        >
          <g>
            <path
              d="M26.998,32.88c2.928-2.927,4.54-6.819,4.54-10.96c0-4.14-1.612-8.032-4.54-10.96L16.038,0L5.078,10.96
							c-2.928,2.928-4.54,6.82-4.54,10.96c0,4.141,1.612,8.033,4.54,10.96c0.128,0.128,0.267,0.238,0.398,0.361
							c0.357,0.375,0.751,0.713,1.183,1.001c2.685,2.052,5.942,3.178,9.379,3.178C20.178,37.42,24.071,35.808,26.998,32.88z
							M6.492,12.374l9.546-9.546l9.546,9.546c2.55,2.55,3.954,5.94,3.954,9.546c0,3.606-1.404,6.996-3.954,9.546
							s-5.939,3.954-9.546,3.954c-1.094,0-2.164-0.144-3.201-0.396c2.732-0.954,4.701-3.551,4.701-6.604c0-3.859-3.141-7-7-7
							c-3.465,0-6.343,2.534-6.896,5.844c-0.719-1.666-1.104-3.475-1.104-5.344C2.538,18.314,3.942,14.924,6.492,12.374z M7.679,32.511
							C7.541,32.415,7.418,32.3,7.29,32.19c-0.124-0.106-0.243-0.219-0.363-0.329c-0.856-0.898-1.389-2.106-1.389-3.441
							c0-2.757,2.243-5,5-5s5,2.243,5,5s-2.243,5-5,5c-1.023,0-1.974-0.311-2.767-0.84C7.741,32.556,7.709,32.535,7.679,32.511z"
            />
            <path
              d="M51.902,25.05l-6.364-6.363l-6.364,6.363c-3.509,3.51-3.509,9.219,0,12.729c1.755,1.754,4.06,2.631,6.364,2.631
							s4.609-0.877,6.364-2.631C55.411,34.269,55.411,28.56,51.902,25.05z M50.488,36.364c-2.73,2.729-7.172,2.729-9.9,0
							c-2.729-2.729-2.729-7.171,0-9.9l4.95-4.949l4.95,4.949C53.216,29.193,53.216,33.635,50.488,36.364z"
            />
            <path
              d="M29.538,43l-3.535,3.535c-1.949,1.949-1.949,5.122,0,7.071c0.943,0.944,2.199,1.465,3.535,1.465s2.591-0.521,3.535-1.465
							c1.949-1.95,1.949-5.122,0-7.071L29.538,43z M31.659,52.192c-1.133,1.133-3.109,1.133-4.242,0c-1.17-1.17-1.17-3.073,0-4.243
							l2.121-2.121l2.121,2.121C32.829,49.119,32.829,51.022,31.659,52.192z"
            />
          </g>
        </svg>
      </a>
    </div>

    {{ if .ShowTags }}
      <div id="tags" class="btn-group-vertical">
        {{ range .Tags }}
          {{ if .Valid }}
            <a
              class="btn btn-success"
              href="/api/tag{{ $.Url }}?name={{ .Name }}"
              >{{ .Name }}</a
            >
          {{ else }}
            <a
              class="btn btn-danger"
              href="/api/tag{{ $.Url }}?name={{ .Name }}"
              >{{ .Name }}</a
            >
          {{ end }}
        {{ end }}
      </div>
    {{ end }}		<script>
			document.addEventListener("keydown", function(e) {
				switch (e.keyCode) {
				case 37: // left
					window.location.href = document.getElementById("previous").getAttribute("href")
					break;
				case 39: // right
					window.location.href = document.getElementById("next").getAttribute("href")
					break;
				}
			})
		</script>
		<script>
			const urlParams = new URLSearchParams(window.location.search);
			if (urlParams.get("timer") != null) {
				setTimeout(function() {
					window.location.href = "{{.Next}}?{{.QueryString}}"
				}, urlParams.get("timer"))
			}
		</script>
		<script>
			if ("{{.ShowTags}}" == "true") {
				for (element of document.getElementsByClassName("mood_button")) {
					element.href = "/api/mood{{$.Url}}?mood=" + element.id
				}
				if ("{{.Mood}}" != "") {
					document.getElementById("{{.Mood}}").firstElementChild.style.fill = "red"
				}
			} else {
				const moodCookie = document.cookie.split('; ').find(row => row.startsWith('mood='))
				if (moodCookie != undefined) {
					const mood = moodCookie.split('=')[1];
					if (mood != "") {
						document.getElementById(mood).firstElementChild.style.fill = "red"
					}
				}
			}
		</script>
  </body>
</html>
